# 原定计划 #
  * （合并的任务）着手ucore和runtime lib中线程功能对接的调研，并将最简单的”hello world”搬上ucore。

# 项目进展 #
  1. 实现了runtime.setldt，并在ucore中添加对应的伪lde；
  1. 实现了runtime.exit；
  1. 实现了runtime.write，并修改stderr为stdout中输出；
  1. 忽略了runtime.rt\_sigaction，使之直接返回；
  1. 正在调试runtime.mmap（遇到的困难见下文）；

目前go程序会因为内存映射的错误而抛异常，但异常信息已经可以正确打印。

# 本阶段主要困难 #

vma应当是交集为空的，但问题在于可能会遇到一些特定的情况下请求map的交集不为空，比如hello world中，在第一次调用runtime.mmap时，将申请从0x08473030开始的长度为0x30000000的地址空间，这段地址空间和原本数据段已经分配的空间交集不为空，但交集又不含有原始数据。我们将这理解为对地址空间的扩充，但是目前的ucore是无法在mmap时进行扩充的，ucore的做法是在检测到申请的地址和原有某个vma冲突的时候直接判失败。

另外，目前以简单的解决方案（即另分配空间，而非采用合并方法）暂时绕过第一次mmap请求后，已经检测到进一步的map请求，该请求要map从0x00000001开始的地址空间。目前尚不能明确这个请求的起因是由于前一次mmap采用了简单的解决方案造成的还是另有原因。如果另有原因，则很可能暗示了该请求与ucore虚存分配的矛盾。

# 下一步工作 #
Hello world进展不算顺利，目前只能遇到问题后继续尝试解决。下一步主要也就是解决内存映射的问题了。