# 总体实验计划 #

第4～5周：
  * 了解实验环境，明了现有环境距离将go中的”hello world”搬上ucore所欠缺的部分。<**已完成**>
第6周：
  * 实现将最简单的”hello world”搬上ucore。<**难度估计不足，未能按时完成，已在预留机动时间内完成**>
第7周：
  * 着手ucore和runtime lib中线程功能对接的调研。<**推迟项目，已于12周完成**>
第8周：
  * 如果第七周进展顺利，将着手设计相关内容，否则将机动。<**hello world已完成**>
第9～13周：
  * 进一步完善runtime lib，使得更复杂的go可以运行于ucore上。完善ucore的线程机制，使之与go的线程调度匹配。如果有必要，将进行动态链接的调研/实现<**已完成**>。
第14～15周：
  * 如果前面进展顺利，将尝试提供操作系统层面的runtime支持，尤其是新型线程的支持；否则将机动。<**改为测试**>
第16周：
  * 项目总结。<_正在进行_>

# 各周详细进展 #

## 第4～5周 ##

  1. 总结已经可以服务于runtime库的支持。<**已于第四周完成**>
  1. 完全了解ucore的运作。<**已于第五周基本完成**>
  1. 了解go的runtime库的结构并分析"hello world"所需要的全部支持。<**已于第四周完成**>
  1. 尝试解决runtime库的链接方法，静态链接方法将用于初期实验。<**从Hello World的程序来看，还未看到需要用到动态链接的方法，暂时不考虑。**>
  1. 初步尝试Hello world的支持，将首先从如何创建使用ucore-runtime的GO编译器开始着手，这将包含通过了解linux相关系统调用的参数意义，来实现／更改ucore的系统调用，并在GO源码中添加旨在导向ucore系统函数的调用函数，以及用于标识系统额外信息（比如系统函数ID等）的z文件。在充分了解ucore后将暂时改动ucore的系统调用，使得已经识别的函数借口匹配，未识别的函数在被调用时打印信息后直接返回，以便调试。此任务原定于第六周完成，因此第五周将主要着力于尝试，以进一步熟悉调式与实验环境。<**将与后两周任务合并**>
  1. 计划外任务：完成最大修改集的分析。<**已于第五周完成**>

## 第6周 ##

  1. 缩小最大修改集。<**已于第六周完成**>
  1. 继续Hello world。<**已于第八周完成**>

## 第7周 ##

  1. 部分运行时函数的实现：runtime.setldt、runtime.exit、runtime.write、runtime.rt\_sigaction、runtime.mmap。<**已于第七周完成**>
  1. 可以打印程序运行时错误信息。<**已于第七周完成**>
  1. 在runtime.mmap处遇到障碍，详情参见[Week7](Week7.md)报告。<**已于第八周调通**>

## 第8周 ##

  1. 将使用预留的第八周作为机动时间继续hello world。<**已完成**>

## 第9周 ##

  1. 开始goroutines的测试。<**已完成**>
  1. 对package的进一步支持。<**已新增15个系统无关包，4个系统相关包至patch**>
  1. 对测试程序的理解能力加强。<**已完成《Learning Go》的阅读**>
  1. 进一步可扩展性调研。<_将继续进行_>

## 第10周 ##

  1. 开始peter.go的测试。<**推迟，已于12周完成**>
  1. Lock / Unlock机制的实现。<**推迟，已于11周完成**>

## 第11周 ##

  1. 利用semaphore实现Go的锁机制。<**已完成**>
  1. 完成clone。<**已完成**>

## 第12周 ##

  1. 继续peter.go的测试。<**已完成**>
  1. 完成Sleep。<**已完成**>
  1. 修正fmt.Println的Bug。< **非Bug，已忽略** >
  1. 探讨ldt的解决方案。<**已完成**>

## 第13周 ##

  1. 解决ldt的问题。<**已完成**>
  1. 逐步开始测试。<**已完成**>
  1. 继续完善测试集包含的syscall。<**有限完成**>

## 第14～15周 ##

  1. 测试。<_正在进行，所有样例均已运行并分析，部分尚未通过_>

## 第16周 ##

  1. 总结。<_正在进行_>